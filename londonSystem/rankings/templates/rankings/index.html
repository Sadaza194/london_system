{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->
    


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.2/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/2.0.2/js/dataTables.bootstrap5.js"></script>
    <script src="https://cdn.datatables.net/2.0.2/js/dataTables.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.css" />


    <link rel="stylesheet" href="{% static 'style.css' %}">

    <style>
        th a {
            color: whitesmoke;
        }
        th a:hover {
            color: lightseagreen;
        }
        .btn-reload {
            margin: 5px;
        }
    </style>

</head>

<body>
<!-- <button type="button" class="btn btn-danger btn-reload" id="btn_reload" onclick="reload()" >Reload Data</button> -->

<form action="{% url 'btn-reload' %}" method="post">
    {% csrf_token %}
     <button type="submit" name='btn-reload' class="btn btn-danger btn-reload">Reload Data</button>
</form>

{% if player_list %}
    <!-- <table class="table table-dark"> -->
    <table id="myTable" class="table table-dark table-striped table-hover">
        <thead>
            <tr>
                <!-- <th><a href="?sort=rank">Rank</th>
                <th><a href="?sort=title">Title</th>
                <th><a href="?sort=fname">First</th>
                <th><a href="?sort=lname">Last</th>
                <th><a href="?sort=age">Age</th>
                <th><a href="?sort=country">Country</th>
                <th><a href="?sort=classic_rank">Classic</th>
                <th><a href="?sort=blitz_rank">Blitz</th>
                <th><a href="?sort=rapid_rank">Rapid</th> -->
                <th>Rank</th>
                <th>Title</th>
                <th>First</th>
                <th>Last</th>
                <th>Age</th>
                <th>Country</th>
                <th>Classic</th>
                <th>Blitz</th>
                <th>Rapid</th>
            </tr>
        </thead>
        <tbody>
        {% for player in player_list %}
            <tr>
                <td> {{ player.rank }} </td>
                <td> {{ player.title }} </td>
                <td> {{ player.fname }} </td>
                <td> {{ player.lname }} </td>
                <td> {{ player.age }} </td>
                <td> {{ player.country }} </td>
                <td> {{ player.classic_rank }} </td>
                <td> {{ player.blitz_rank }} </td>
                <td> {{ player.rapid_rank }} </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No Player Rankings are Available</p>
{% endif %}

</body>

<script>
$(document).ready( function () {
    $('#myTable').DataTable({
        order: [[0, 'asc']], 
        layout: {
            topStart: 'info',
            topEnd: 'search',
            // topStart: 'info',
            // topEnd: 'paging',
            bottomStart: 'pageLength',
            bottomEnd: 'paging'
        }
    });
} );

function reload() {
    window.open("{% url 'btn-reload' %}'");
    alert("Calling Reload!")
};

// $.ajax({
//       type: "POST",
//       url: "{% url 'btn-reload' %}", // then in your views.py you can define your operations 
//       data: {
//         csrfmiddlewaretoken: '{{ csrf_token }}',
//         text: your_input
//       },   /* Passing the text data */
//       success: function(response) {
//         alert(response); // response form your request
//       }
//     });
</script>

</html>




